<div class="enterprise-dashboard">

  <aside class="sidebar" [class.collapsed]="isSidebarCollapsed">

    <div class="sidebar-header">
      <img src="assets/images/Opportunity-Slogan.png" alt="Enterprise Logo" class="dashboard-logo">
      <button class="collapse-btn" (click)="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </button>
    </div>


    <nav class="sidebar-nav">
      <ul>

        <li class="nav-group">
          <div class="nav-group-title">Tender Management</div>
          <div class="dropdown-container">
            <a class="nav-link" (click)="toggleDropdown('tender')">
              <i class="fas fa-tasks"></i>
              <span>Tender Options</span>
              <i class="fas fa-caret-down dropdown-icon"></i>
            </a>
            <div class="dropdown-items" *ngIf="dropdownStates['tender']">
              <a routerLink="/tender-list" class="dropdown-item"><i class="fas fa-list"></i> Tender List</a>
              <a [routerLink]="['/tender', 1, 'awrd']" class="dropdown-item"><i class="fas fa-trophy"></i> Award Work
                Orders</a>

              <a routerLink="/sources" class="dropdown-item"><i class="fas fa-database"></i> Sources</a>
              <a routerLink="/locations" class="dropdown-item"><i class="fas fa-map-marker-alt"></i> Locations</a>
              <a routerLink="/categories" class="dropdown-item"><i class="fas fa-tags"></i> Categories</a>
            </div>
          </div>
        </li>



        <li class="nav-group">
          <div class="nav-group-title">Bid Management</div>
          <div class="dropdown-container">
            <a class="nav-link" (click)="toggleDropdown('bid')">
              <i class="fas fa-gavel"></i>
              <span>Bid Options</span>
              <i class="fas fa-caret-down dropdown-icon"></i>
            </a>
            <div class="dropdown-items" *ngIf="dropdownStates['bid']">
              <a routerLink="/awerd">Award</a>
              <a routerLink="/my-bids" class="dropdown-item"><i class="fas fa-folder-open"></i> My Bids</a>
              <a routerLink="/bid-details" class="dropdown-item"><i class="fas fa-search"></i> Bid Details</a>
              <a routerLink="/bid-list-admin" class="dropdown-item"><i class="fas fa-list-ol"></i> Bid List (Admin)</a>
            </div>
          </div>
        </li>


        <li class="nav-group">
          <div class="nav-group-title">Evaluation</div>
          <div class="dropdown-container">
            <a class="nav-link" (click)="toggleDropdown('evaluation')">
              <i class="fas fa-clipboard-check"></i>
              <span>Evaluation Options</span>
              <i class="fas fa-caret-down dropdown-icon"></i>
            </a>
            <div class="dropdown-items" *ngIf="dropdownStates['evaluation']">
              <a routerLink="/evaluate-bid" class="dropdown-item"><i class="fas fa-check-circle"></i> Evaluate Bid</a>
              <a routerLink="/evaluation-history" class="dropdown-item"><i class="fas fa-history"></i> Evaluation
                History</a>
              <a routerLink="/evaluation-logs" class="dropdown-item"><i class="fas fa-clipboard-list"></i> Evaluation
                Logs</a>
            </div>
          </div>
        </li>


        <li class="nav-group">
          <div class="nav-group-title">User Management</div>
          <div class="dropdown-container">
            <a class="nav-link" (click)="toggleDropdown('user')">
              <i class="fas fa-users-cog"></i>
              <span>User Options</span>
              <i class="fas fa-caret-down dropdown-icon"></i>
            </a>
            <div class="dropdown-items" *ngIf="dropdownStates['user']">
              <a routerLink="/user-list" class="dropdown-item"><i class="fas fa-users"></i> User List</a>
              <a routerLink="/create-user" class="dropdown-item"><i class="fas fa-user-plus"></i> Create User</a>
              <a routerLink="/edit-user" class="dropdown-item"><i class="fas fa-user-edit"></i> Edit User</a>
              <a routerLink="/user-roles" class="dropdown-item"><i class="fas fa-user-cog"></i> User Roles</a>
            </div>
          </div>
        </li>


        <li class="nav-group">
          <div class="nav-group-title">Reports</div>
          <div class="dropdown-container">
            <a class="nav-link" (click)="toggleDropdown('report')">
              <i class="fas fa-chart-bar"></i>
              <span>Report Options</span>
              <i class="fas fa-caret-down dropdown-icon"></i>
            </a>
            <div class="dropdown-items" *ngIf="dropdownStates['report']">
              <a routerLink="/workorder/123" class="dropdown-item">
                <i class="fas fa-briefcase"></i> Work Order
              </a>
              <a routerLink="/work-pogress" class="dropdown-item">
                <i class="fas fa-tasks"></i> Work Progress
              </a>
              <a routerLink="/work-report" class="dropdown-item">
                <i class="fas fa-file-alt"></i> Work Report
              </a>
            </div>
          </div>
        </li>



        <li class="nav-group">
          <div class="nav-group-title">Payments</div>
          <div class="dropdown-container">
            <a class="nav-link" (click)="toggleDropdown('payments')">
              <i class="fas fa-credit-card"></i>
              <span>Payment Options</span>
              <i class="fas fa-caret-down dropdown-icon"></i>
            </a>
            <div class="dropdown-items" *ngIf="dropdownStates['payments']">
              <a routerLink="/payment" class="dropdown-item">
                <i class="fas fa-wallet"></i> General Payment
              </a>
              <a routerLink="/tender-payment/123" class="dropdown-item">
                <i class="fas fa-file-invoice"></i> Tender Payment
              </a>
              <a routerLink="/work-payment" class="dropdown-item">
                <i class="fas fa-hand-holding-usd"></i> Work Payment
              </a>
            </div>
          </div>
        </li>

      </ul>
    </nav>

    <!-- Footer -->
    <div class="sidebar-footer">
      <button class="btn btn-support">
        <i class="fas fa-life-ring"></i>
        <span>Enterprise Support</span>
      </button>
    </div>
  </aside>



  <div class="container">
    <h2>Existing Work Orders</h2>

    <table class="table table-bordered mt-3" *ngIf="workOrders.length > 0; else noOrders">
      <thead>
        <tr>
          <th>ID</th>
          <th>Bid ID</th>
          <th>Tender ID</th>
          <th>Bidder Name</th>
          <th>Contact Number</th>
          <th>Email</th>
          <th>Work Order Date</th>
          <th>Download</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of workOrders">
          <td>{{ order.id }}</td>
          <td>{{ order.bidId }}</td>
          <td>{{ order.tenderId }}</td>
          <td>{{ order.bidderName }}</td>
          <td>{{ order.contactNumber }}</td>
          <td>{{ order.email }}</td>
          <td>{{ order.workOrderDate | date:'medium' }}</td>
          <td>
            <button class="btn btn-sm btn-secondary" (click)="downloadRowAsPDF(order)">
              Download PDF
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <ng-template #noOrders>
      <p>No Work Orders found.</p>
    </ng-template>
  </div>